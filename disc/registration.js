!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}({0:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));class o{constructor(){this.url="http://localhost:3000/server/",this.tags=["niebieski","czarny","różowy","pomarańczowy","srebrny","czerwnoy","biały","brązowy","żółty","szary","złoty","zielony","fioletowy"],this.category=[{brooches:"Broszki"},{bracelets:"Bransoletki"},{earrings:"Kolczyki"},{yarn:"Szydełkowe twory"},{bags:"Torebki"},{tedy:"Maskotki"},{hwawl:"Chusty"},{}]}}},3:function(e,t,r){},8:function(e,t,r){"use strict";r.r(t);var o=r(0);r(3);new class{constructor(){this.form=document.querySelector("#registration"),this.login=document.querySelector("#login"),this.password=document.querySelector("#password"),this.passwordConfirm=document.querySelector("#passwordConfirm"),this.mail=document.querySelector("#mail"),this.message=document.querySelector("#message"),this.form&&this.form.addEventListener("submit",this.register.bind(this)),this.config=new o.a,this.urlusers=this.config.url+"/users/"}validate(e,t,r,o){let n=!0;const s={login:e.length>=5,password:t.length>=1,passwordConfirm:t===r,mail:!!o.match(/\S+@\S+\.\S+/)};let i="";for(let e in s)!1===s[e]&&(i+=`popraw pole ${e}`,n=!1);return this.message.innerText=i,n}register(e){e.preventDefault();const t=this.login.value.toLowerCase(),r=this.password.value,o=this.passwordConfirm.value,n=this.mail.value.toLowerCase();if(!this.validate(t,r,o,n))return;if(r!==o)return this.message.innerText="hasła nie są takie same";if(!n)return this.message.innerText="nie wypełniono wszystkich potrzebnych pól";const s={login:t,password:r,mail:n};fetch(this.urlusers,{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(e=>{if(200!==e.status)throw error();return e.json()}).then(e=>{this.message.innerText=e}).catch(e=>{this.message.innerText="Podczas próby rejestracji wystąpił błąd. Spróbuj ponownie."})}}}});